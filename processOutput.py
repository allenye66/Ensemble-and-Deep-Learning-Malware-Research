
def process(filepath):
	arr = []
	with open(filepath) as my_file:
		for line in my_file:
			s = line[43:]
			arr.append(s)
	#rint(arr)

	with open(filepath, "w") as txt_file:
		for line in arr:
			txt_file.write("".join(line) )

def remove_values_from_list(the_list, val):
   return [value for value in the_list if value != val]

def processOpcodes(filepath):
	arr = []
	#scan in the string of unprocessed opcodes into an array
	with open(filepath) as my_file:
		for line in my_file:
			arr.append(line[:-1]) #-1 so we remove the "/n character"

	#print(arr)
	#print(len(arr))




	#obtain all possible opcodes
	possible_opcodes = all_opcodes()
	#print(possible_opcodes)
	arr[:] = (value for value in arr if value != "invalid") #filter out the "invalid"
	arr2 = []
	i = 0
	for i in range(len(arr)):
		if " " not in arr[i]:
			arr2.append(arr[i])
			print(arr[i])
		else:
			#temp = arr[i]
			#space = temp.find(" ")
			#temp2 = temp[0:space]
			#print(temp2)
			arr2.append(arr[i][0:arr[i].find(" ")])
#



	#print(type(possible_opcodes))

	#print(len(arr))

	#rewrite processed opcodes back to text file
	with open(filepath, "w") as txt_file:
		for line in arr2:
			txt_file.write("".join(line) + "\n")

def all_opcodes():
	s = set()
	with open("allOpcodes.txt") as my_file:
		for line in my_file:
			line = line.lower().rstrip()
			#print(line)
			s.add(line)
	return s




#if __name__ == "__main__":
#	process("VirusShare_fffb1996a5b7c4c716931af2842712e3.txt")